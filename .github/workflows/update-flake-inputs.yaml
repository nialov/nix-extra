jobs:
  update-flake-inputs:
    permissions:
      contents: write
      pull-requests: write
    runs-on: ubuntu-latest
    steps:
    - id: app-token
      uses: actions/create-github-app-token@v1
      with:
        app-id: ${{ secrets.APP_ID }}
        private-key: ${{ secrets.APP_PRIVATE_KEY }}
    - uses: actions/checkout@v5
    - continue-on-error: true
      uses: cachix/cachix-action@v14
      with:
        authToken: ${{ secrets.CACHIX_AUTH_TOKEN }}
        name: nialov
    - uses: DeterminateSystems/nix-installer-action@v9
    - uses: mic92/update-flake-inputs@main
      with:
        auto-merge: false
        github-token: ${{ steps.app-token.outputs.token }}
    timeout-minutes: 60
'on':
  schedule:
  - cron: 0 2 * * 0
  workflow_dispatch: {}
